\begin{tikzpicture}
    %Barvy
    \colorlet{tangentLine}{accentColor}
    \colorlet{point}{accentColor!50!black}

    % Svislá mřížka
    \foreach \x in {-2,...,2} {
        \ifnum \x = 0 {} \else {
            \draw (\x, 0) node[anchor=north, inner sep=1mm, color=lightgray] {$\x$};
            \draw[dash pattern=on 0 off 0.5mm, line cap=round] (\x, -2.5) -- (\x, 2.5);
            \draw (\x, 0.05) -- (\x, -0.05);
        } \fi
    }
    % Vodorovná mřížka
    \foreach \y in {-2,...,2} {
        \ifnum \y = 0 {} \else {
            \draw (0, \y) node[anchor=east, inner sep=1mm, color=lightgray] {$\y$};
            \draw[dash pattern=on 0 off 0.5mm, line cap=round] (-2.5, \y) -- (2.5, \y);
            \draw (0.05, \y) -- (-0.05, \y);
        } \fi
    }
    % Osa x a y
    \draw[->] (-2.5, 0) -- (2.5, 0);
    \draw (2.5, 0) node[anchor=south east, inner sep=1mm] {$x$};
    \draw[->] (0, -2.5) -- (0, 2.5);
    \draw (0, 2.5) node[anchor=north west, inner sep=1mm] {$y$};

    % Graf
    \draw[color=point] (-2.3, -2) node[anchor=west, inner sep=1mm] {$f(x)$};
    \directlua{figDerivTecny = require("chapters/derivace/fig-tecny")}
    \directlua{figDerivTecny.graph()}

    % Tečny a body dotyku

    \draw[thick, color=tangentLine] (-1.63, 1.165) -- (-2.25, -1.625);
    \draw[color=tangentLine] (-2.25, -1.625) node[anchor=south east, inner sep=0.5mm] {$t_1$};
    \fill[color=point] (-2, -0.5) circle (0.05);
    \draw[color=point] (-2, -0.5) node[anchor=north west, inner sep=0.5mm] {$T_1$};

    \draw[thick, color=tangentLine] (-2, 0.125) -- (-1, 2);
    \draw[color=tangentLine] (-1, 2) node[anchor=south east, inner sep=0.5mm] {$t_2$};
    \fill[color=point] (-1.5, 1.0625) circle (0.05);
    \draw[color=point] (-1.5, 1.0625) node[anchor=north west, inner sep=0.5mm] {$T_2$};

    \draw[thick, color=tangentLine] (-2.25, 1.5) -- (0.25, 1.5);
    \draw[color=tangentLine] (0.25, 1.5) node[anchor=south, inner sep=1mm] {$t_3$};
    \fill[color=point] (-1, 1.5) circle (0.05);
    \draw[color=point] (-1, 1.5) node[anchor=south west, inner sep=0.5mm] {$T_3$};

    \fill[color=point] (0, 0.5) circle (0.05);
    \draw[color=point] (0, 0.5) node[anchor=west, inner sep=1mm] {$T_4$};

    \draw[thick, color=tangentLine] (-0.25, -0.5) -- (2.25, -0.5);
    \draw[color=tangentLine] (-0.25, -0.5) node[anchor=south, inner sep=1mm] {$t_5$};
    \fill[color=point] (1, -0.5) circle (0.05);
    \draw[color=point] (1, -0.5) node[anchor=north east, inner sep=0.5mm] {$T_5$};

    \draw[thick, color=tangentLine] (2, 0.875) -- (1, -1);
    \draw[color=tangentLine] (1, -1) node[anchor=west, inner sep=.15cm] {$t_6$};
    \fill[color=point] (1.5, -0.0625) circle (0.05);
    \draw[color=point] (1.5, -0.0625) node[anchor=south east, inner sep=0.5mm] {$T_6$};

    \draw[thick, color=tangentLine] (1.68, 0.06) -- (2.22, 2.49);
    \draw[color=tangentLine] (2, 1.5) node[anchor=north west, inner sep=0.5mm] {$t_7$};
    \fill[color=point] (2, 1.5) circle (0.05);
    \draw[color=point] (2, 1.5) node[anchor=east, inner sep=1mm] {$T_7$};
\end{tikzpicture}